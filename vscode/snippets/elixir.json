{
  "LiveView form handlers": {
    "prefix": "lvformhandlers",
    "body": [
      "@impl true",
      "def handle_event(\"validate\", %{\"${1:form}\" => ${1}_params}, socket) do",
      "  changeset =",
      "    socket.assigns.${1}",
      "    |> ${2:Context}.change_page(${1}_params)",
      "    |> Map.put(:action, :validate)",
      "",
      "  {:noreply, assign_form(socket, changeset)}",
      "end",
      "",
      "def handle_event(\"${3:action}\", %{\"${1}\" => ${1}_params}, socket) do",
      "  case $2.${3}_${1}(${1}_params) do",
      "    {:ok, ${1}} ->",
      "      changeset = Sites.change_page(page)",
      "",
      "      socket",
      "      |> assign($1: $1)",
      "      |> assign_form(changeset)",
      "      |> noreply()",
      "",
      "    {:error, changeset} ->",
      "      socket",
      "      |> assign($1: changeset.data)",
      "      |> assign_form(changeset)",
      "      |> noreply()",
      "  end",
      "end",
      "",
      "defp assign_form(socket, %Ecto.Changeset{} = changeset) do",
      "  assign(socket, :form, to_form(changeset))",
      "end",
      "%%%%%%%%%%%%%%% MOVE ME",
      "alias ${WORKSPACE_NAME/(.*)/${1:/pascalcase}/}.$2.${1/(.*)/${1:/pascalcase}/}",
      "def mount(_params, _session, socket) do",
      "  $1 = %${1/(.*)/${1:/pascalcase}/}{}",
      "  changeset = $2.change_$1($1)",
      "",
      "  socket",
      "  |> assign($1: $1)",
      "  |> assign_form(changeset)",
      "  |> ok()",
      "end"
    ],
    "description": "Define LiveView form handlers"
  }
}